---
apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: reindex-videos
spec:
  schedule: 0 14 * * *
  jobTemplate:
    spec:
      template:
        spec:
          containers:
          - name: reindex-videos
            image: app:0
            command:
            - java
            - -jar
            - app.jar
            envFrom:
            - secretRef:
                name: video-service
            env:
            - name: SPRING_PROFILES_ACTIVE
              value: no-event-bus
            - name: MODE
              value: reindex-videos
            resources:
              requests:
                cpu: 150m
                memory: 500Mi
              limits:
                cpu: 1
                memory: 750Mi
